import { parseTransaction } from '../src/transaction-response/universal-uniswap';
import type { TransactionResponse } from 'ethers';
import type { TransactionDataSwap } from '../src/types';

const txs: TransactionResponse[] = [
  {
    data: '0x3593564c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000646c9be300000000000000000000000000000000000000000000000000000000000000030a080c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000016000000000000000000000000066861d5f0fbfb7b2711712fef2172c560d08d0ab000000000000000000000000ffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000000649421cd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ef1c6e67703c7bd7107eed8303fbe6ec2554bf6b00000000000000000000000000000000000000000000000000000000646c9bd500000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000418e9610caf7d4d26eb9cd9eb8fc9cea020b5e31a7cfcca6f974f7ea1e191f9dfd73399a887f6d151eeba2b7247dde91c054f253521b9bc8f95d3dee3c932b746b1c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000041facbfb0d428e955c50000000000000000000000000000000000000000000000000070f50647273aba00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000066861d5f0fbfb7b2711712fef2172c560d08d0ab000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000070f50647273aba',
    hash: '0x3b90785ce8159dc20e4c0348790330872f3b12c8c49767e92dc6cb27ba2f5cb9',
    from: '0xB8Bd911aA8fa479758275Bab75d4E0eb91Ed7408',
    gasLimit: 1n,
    gasPrice: 1n
  } as any,
  {
    data: '0x3593564c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000647d13730000000000000000000000000000000000000000000000000000000000000002000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000004a32004e0acab92461a0000000000000000000000000000000000000000000000000525e48e19ae0de500000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002b8da0e5b872aecc1d53633f540ae49a51d59007c9002710c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000525e48e19ae0de5',
    hash: '0x0fdf93132c25f43ddff078da840f721c9276ec2dfd3e1dca9878dd79cba6fa5b',
    from: '0xB8Bd911aA8fa479758275Bab75d4E0eb91Ed7408',
    gasLimit: 1n,
    gasPrice: 1n
  } as any,
  {
    data: '0x3593564c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000006478776b00000000000000000000000000000000000000000000000000000000000000020b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000002c68af0bb1400000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000002c68af0bb14000000000000000000000000000000000000000000000000010dd654076920ef1bb600000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002bc02aaa39b223fe8d0a0e5c4f27ead9083c756cc20027108da0e5b872aecc1d53633f540ae49a51d59007c9000000000000000000000000000000000000000000',
    hash: '0x59b82259f1211c3a02cd2c42805544e9aed0aac1e0a12b78bf6fa14939a94cd3',
    from: '0xB8Bd911aA8fa479758275Bab75d4E0eb91Ed7408',
    gasLimit: 1n,
    gasPrice: 1n
  } as any,
  {
    data: '0x3593564c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000006482b82f00000000000000000000000000000000000000000000000000000000000000030a080c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001e0000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000001600000000000000000000000007ca5af5ba3472af6049f63c1abc324475d44efc1000000000000000000000000ffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000064aa3e2b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000003fc91a3afd70395cd496c647d5a6cc9d4b2b7fad000000000000000000000000000000000000000000000000000000006482b83300000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000418ad7532daf4b0cbdc0e11b447ef0d60f6ec8493afc5cbe37880d0d007fbf6e7c614af6e567a6ffe2c9d52478ee180b864049e200387f68908f2553ea1fd2797a1b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000005f6b27d6ffcaf0000000000000000000000000000000000000000000000001cfd3de9ecd4470a00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ca5af5ba3472af6049f63c1abc324475d44efc1000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000001cfd3de9ecd4470a',
    hash: '0x958e92ece1ac0ef7f8065548d55b12909cb146c4be8a890c61cb9cb683a621f7',
    from: '0x6ee19d6fc1a778f85146F3D8A9CF4f6052610C9E',
    gasLimit: 1n,
    gasPrice: 1n
  }
];

const expected: Partial<TransactionDataSwap>[] = [
  {
    wallet: '0xB8Bd911aA8fa479758275Bab75d4E0eb91Ed7408',
    tokenIn: '0x66861D5f0Fbfb7b2711712fEF2172c560D08d0AB',
    tokenOut: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
    amountIn: 19473762860083918230981n,
    amountOut: 31794604703955642n,
    mode: 'out'
  },
  {
    wallet: '0xB8Bd911aA8fa479758275Bab75d4E0eb91Ed7408',
    tokenIn: '0x8dA0e5B872aECc1D53633f540AE49A51D59007c9',
    tokenOut: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
    amountIn: 21898592431434575791642n,
    amountOut: 370953843295260133n,
    mode: 'out'
  },
  {
    wallet: '0xB8Bd911aA8fa479758275Bab75d4E0eb91Ed7408',
    tokenIn: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
    tokenOut: '0x8dA0e5B872aECc1D53633f540AE49A51D59007c9',
    amountIn: 200000000000000000n,
    amountOut: 4977618132998135159734n,
    mode: 'out'
  },
  {
    wallet: '0x6ee19d6fc1a778f85146F3D8A9CF4f6052610C9E',
    tokenIn: '0x7CA5af5bA3472AF6049F63c1AbC324475D44EFC1',
    tokenOut: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
    amountIn: 1678621352656047n,
    amountOut: 2088893877079787274n,
    mode: 'out'
  }
];

for (let i = 0; i < txs.length; i++) {
  it(`tx: ${txs[i].hash}`, () => {
    const swap = parseTransaction(txs[i]);
    // @ts-expect-error
    delete swap.path;
    // @ts-expect-error
    delete swap.protocol;
    expect(swap).toEqual(expected[i]);
  });
}
